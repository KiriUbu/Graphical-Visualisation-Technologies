<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kyrill Klaus Carousel </title>
    <style>
        body{
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
        }

        .wheel{
            width: 300px;
            height: 300px;
            background-color: blue;

            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%,-50%);

        }

        .card {
            width: 150px;
            height: 150px;
            background-color: red;

            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%,-50%);

        }
    </style>
</head>
<body>

    <div class="wheel">
        <img src="./pics/ledZ.jpeg" class="card" name="0"></img>
        <img src="./pics/BirdyNum.jpg" class="card" name="1"></img>
        <img src="./pics/deadmau5.jpg" class="card" name="2"></img>
        <img src="./pics/nirvana.jpg" class="card" name="3"></img>
        <img src="./pics/sido.jpg" class="card" name="4"></img>
        <img src="./pics/tool-fear-inoculum.jpg" class="card" name="5"></img>
        <img src="./pics/eminem.jpeg" class="card" name="6"></img>
        <img src="./pics/fukked.jpg" class="card" name="7"></img>
    </div>


    <script>
        let rot= Math.PI / 4.0;
        let new_rot = 0.0;
        let new_x=0.0;
        let new_y=0.0;

        let wheel_radius = 210.00;
        let wheel_rot= 0.0;

        const cards = document.querySelectorAll('.card');
        const wheel = document.querySelector('.wheel');
        const center ={
            x : parseFloat(getComputedStyle(cards[0]).left),
            y : parseFloat(getComputedStyle(cards[0]).top)
        };

        cards.forEach((card, index)=> {
            new_rot = rot * index;
            new_x= (Math.cos(new_rot) * wheel_radius);
            new_y= (-1.0 * Math.sin(new_rot) * wheel_radius );

            card.style.left= `${center.x + new_x }px`;
            card.style.top= `${center.y + new_y }px`;
        });

        document.addEventListener('wheel', event => {
            let scroll_speed= event.deltaY *0.002;
            wheel_rot= wheel_rot + scroll_speed;
            console.log("Winkel");
            let current_winkel= wheel_rot * (180/Math.PI);
            console.log(current_winkel);
            wheel.style.transform = `translate(-50%, -50%) rotate(${wheel_rot * (180/Math.PI)}deg)`;

            cards.forEach((card, index) =>{
                card.style.transform = `translate(-50%, -50%) rotate(${-1*(wheel_rot * (180/Math.PI))}deg)`;
            });
        });

        cards.forEach(card  => {
            card.addEventListener('click', event => {
                console.log(card.name);
                rotateCards(card.name);
            });
        });

        // audio wird erstellt
        var audio = new Audio('./music/Kashmir_Remaster_.mp3');
        //Selectlist wird angesprochen mit EventListener wird Funktion chooseSong aufgerufen


        function chooseSong(track) {
            audio.src = track;
        }

            function playSong() {
                audio.play();
            }

            function pauseSong() {
                audio.pause();
            }



        function rotateCards(degree){
            let coverDeg=0
            switch (degree){
                case "0":
                    console.log("Led Zepllin");
                    coverDeg =-91.0;
                    wheel_rot=-91.0/ (180/Math.PI);
                    track="./music/Kashmir_Remaster_.mp3";
                    chooseSong(track);
                    playSong();
                    break;
                case "1":
                    console.log("BirdyNumNum");
                    coverDeg =-45.0;
                    wheel_rot=-45.0/ (180/Math.PI);
                    track="./music/Birdy Nam Nam - The Parachute Ending.mp3";
                    chooseSong(track);
                    playSong();
                    break;
                case "2":
                    console.log("deadmau5");
                    coverDeg =0;
                    wheel_rot=0;
                    track="./music/Deadmau5 - Strobe.mp3";
                    chooseSong(track);
                    playSong();
                    break;
                case "3":
                    console.log("Nirvana");
                    coverDeg =-315;
                    wheel_rot=-315/ (180/Math.PI);
                    track="./music/Nirvana - Come As You Are.mp3";
                    chooseSong(track);
                    playSong();
                    break;
                case "4":
                    console.log("Sido");
                    coverDeg =-270;
                    wheel_rot=-270/ (180/Math.PI);
                    track="./music/Sido-Endlich Wochenende.mp3";
                    chooseSong(track);
                    playSong();
                    break;
                case "5":
                    console.log("Tool");
                    coverDeg =-224;
                    wheel_rot=-224/ (180/Math.PI);
                    track="./music/TOOL - Sober.mp3";
                    chooseSong(track);
                    playSong();
                    break;
                case "6":
                    console.log("Eminem");
                    coverDeg =-180;
                    wheel_rot=-180/ (180/Math.PI);
                    track="./music/Eminem - Stan-ft. Dido.mp3";
                    chooseSong(track);
                    playSong();
                    break;
                case "7":
                    console.log("FukkedUp");
                    coverDeg =-133;
                    wheel_rot=-133/ (180/Math.PI);
                    track="./music/FUKKED UP - Bad Luck.mp3";
                    chooseSong(track);
                    playSong();
                    break;
            }


            wheel.style.transform = `translate(-50%, -50%) rotate(${coverDeg}deg)`;
            cards.forEach((card, index) =>{
                card.style.transform = `translate(-50%, -50%) rotate(${-1*(coverDeg)}deg)`;
                console.log(wheel_rot);
            });
        }
    </script>




</body>
</html>